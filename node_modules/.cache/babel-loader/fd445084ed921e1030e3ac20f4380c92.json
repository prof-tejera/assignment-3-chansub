{"ast":null,"code":"var _jsxFileName = \"/Users/steymourian/Documents/GitHub/personal/assignment-2-chansub/src/context/LocalTime.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { useInterval } from \"../hooks\";\nimport { AppContext } from \"./ContextProvider\";\nimport DisplayTime from \"../components/generic/DisplayTime.js\";\nimport { convertToMinSec } from \"../utils/helpers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Timer = _ref => {\n  _s();\n\n  let {\n    duration,\n    index,\n    type,\n    isHome\n  } = _ref;\n  const {\n    activeIndex,\n    paused,\n    setActiveIndex,\n    removeItem,\n    queue\n  } = useContext(AppContext);\n  const [time, setTime] = useState(0);\n  const active = activeIndex === index; //when activeIndex === index, set true/false to active\n\n  useInterval(() => {\n    if (activeIndex === queue.length) {\n      console.log(\"it's over!\");\n      setPaused(true);\n      setActiveIndex(0);\n      return;\n    }\n\n    if (paused || !active) return; //If end has reached, reset everything\n    // if((queue.length-1) === activeIndex) {\n    //   console.log(\"End reached!\");\n    //   setActiveIndex(0);\n    //   setPaused(true);\n    //   return;\n    // } \n\n    if (`${time}` === `${duration}`) {\n      setActiveIndex(index + 1);\n    } else {\n      setTime(c => c + 1);\n      console.log(\"activeIndex\", activeIndex);\n    }\n  }, 1000);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: 'q' + index,\n    style: {\n      backgroundColor: active ? \"yellow\" : \"white\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => removeItem(index),\n      style: {\n        display: isHome === 'no' ? 'inline-block' : 'none'\n      },\n      children: \"Remove\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this), \"ai:\", activeIndex, \" q:\", queue.length, \" \", type, \" -\", /*#__PURE__*/_jsxDEV(DisplayTime, {\n      time: convertToMinSec(duration)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), (() => {\n      if (active && type === 'Stopwatch') {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" (Progress: \", convertToMinSec(time), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 58\n        }, this);\n      }\n\n      if (active && type === 'Countdown') {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" (Progress: \", convertToMinSec(duration - time), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 58\n        }, this);\n      }\n    })()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Timer, \"mMBXEY18RXIRfklAhkNiXl5Rlcw=\", false, function () {\n  return [useInterval];\n});\n\n_c = Timer;\nexport default Timer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["useContext","useState","useInterval","AppContext","DisplayTime","convertToMinSec","Timer","duration","index","type","isHome","activeIndex","paused","setActiveIndex","removeItem","queue","time","setTime","active","length","console","log","setPaused","c","backgroundColor","display"],"sources":["/Users/steymourian/Documents/GitHub/personal/assignment-2-chansub/src/context/LocalTime.js"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport { useInterval } from \"../hooks\";\nimport { AppContext } from \"./ContextProvider\";\n\nimport DisplayTime  from \"../components/generic/DisplayTime.js\";\nimport { convertToMinSec } from \"../utils/helpers\";\n\nconst Timer = ({ duration, index, type, isHome }) => {\n  const { activeIndex, paused, setActiveIndex, removeItem, queue} = useContext(AppContext);\n  const [time, setTime] = useState(0);\n  const active = activeIndex === index; //when activeIndex === index, set true/false to active\n\n  useInterval(() => {\n\n    if(activeIndex === queue.length){\n      console.log(\"it's over!\");\n      setPaused(true);\n      setActiveIndex(0);\n      return;\n    }\n    \n    if (paused || !active) return;\n       \n    //If end has reached, reset everything\n    // if((queue.length-1) === activeIndex) {\n    //   console.log(\"End reached!\");\n    //   setActiveIndex(0);\n    //   setPaused(true);\n    //   return;\n    // } \n\n    if (`${time}` === `${duration}`){\n        setActiveIndex(index + 1);\n    } \n    else {\n        setTime((c) => c + 1);\n        console.log(\"activeIndex\", activeIndex);\n      }\n    }, 1000);\n\n    return (\n\n      <div id={'q'+index}\n        style={{\n          backgroundColor: active ? \"yellow\" : \"white\"\n        }}\n      >\n        <button onClick={() => removeItem(index)} style={{display: (isHome === 'no') ? 'inline-block' : 'none'}}>Remove</button>\n        ai:{activeIndex} q:{queue.length} {type} -       \n        <DisplayTime time={convertToMinSec(duration)}/>\n        {\n            (() => {\n                if(active && type==='Stopwatch'){return (<span> (Progress: {convertToMinSec(time)})</span>)}\n                if(active && type==='Countdown'){return (<span> (Progress: {convertToMinSec(duration-time)})</span>)}\n            })()  \n        }  \n\n        \n      </div>\n    );\n};\n\nexport default Timer;\n"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,SAASC,UAAT,QAA2B,mBAA3B;AAEA,OAAOC,WAAP,MAAyB,sCAAzB;AACA,SAASC,eAAT,QAAgC,kBAAhC;;;AAEA,MAAMC,KAAK,GAAG,QAAuC;EAAA;;EAAA,IAAtC;IAAEC,QAAF;IAAYC,KAAZ;IAAmBC,IAAnB;IAAyBC;EAAzB,CAAsC;EACnD,MAAM;IAAEC,WAAF;IAAeC,MAAf;IAAuBC,cAAvB;IAAuCC,UAAvC;IAAmDC;EAAnD,IAA4Df,UAAU,CAACG,UAAD,CAA5E;EACA,MAAM,CAACa,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,CAAD,CAAhC;EACA,MAAMiB,MAAM,GAAGP,WAAW,KAAKH,KAA/B,CAHmD,CAGb;;EAEtCN,WAAW,CAAC,MAAM;IAEhB,IAAGS,WAAW,KAAKI,KAAK,CAACI,MAAzB,EAAgC;MAC9BC,OAAO,CAACC,GAAR,CAAY,YAAZ;MACAC,SAAS,CAAC,IAAD,CAAT;MACAT,cAAc,CAAC,CAAD,CAAd;MACA;IACD;;IAED,IAAID,MAAM,IAAI,CAACM,MAAf,EAAuB,OATP,CAWhB;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA,IAAK,GAAEF,IAAK,EAAR,KAAe,GAAET,QAAS,EAA9B,EAAgC;MAC5BM,cAAc,CAACL,KAAK,GAAG,CAAT,CAAd;IACH,CAFD,MAGK;MACDS,OAAO,CAAEM,CAAD,IAAOA,CAAC,GAAG,CAAZ,CAAP;MACAH,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BV,WAA3B;IACD;EACF,CA1BQ,EA0BN,IA1BM,CAAX;EA4BE,oBAEE;IAAK,EAAE,EAAE,MAAIH,KAAb;IACE,KAAK,EAAE;MACLgB,eAAe,EAAEN,MAAM,GAAG,QAAH,GAAc;IADhC,CADT;IAAA,wBAKE;MAAQ,OAAO,EAAE,MAAMJ,UAAU,CAACN,KAAD,CAAjC;MAA0C,KAAK,EAAE;QAACiB,OAAO,EAAGf,MAAM,KAAK,IAAZ,GAAoB,cAApB,GAAqC;MAA/C,CAAjD;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QALF,SAMMC,WANN,SAMsBI,KAAK,CAACI,MAN5B,OAMqCV,IANrC,qBAOE,QAAC,WAAD;MAAa,IAAI,EAAEJ,eAAe,CAACE,QAAD;IAAlC;MAAA;MAAA;MAAA;IAAA,QAPF,EASM,CAAC,MAAM;MACH,IAAGW,MAAM,IAAIT,IAAI,KAAG,WAApB,EAAgC;QAAC,oBAAQ;UAAA,2BAAmBJ,eAAe,CAACW,IAAD,CAAlC;QAAA;UAAA;UAAA;UAAA;QAAA,QAAR;MAA2D;;MAC5F,IAAGE,MAAM,IAAIT,IAAI,KAAG,WAApB,EAAgC;QAAC,oBAAQ;UAAA,2BAAmBJ,eAAe,CAACE,QAAQ,GAACS,IAAV,CAAlC;QAAA;UAAA;UAAA;UAAA;QAAA,QAAR;MAAoE;IACxG,CAHD,GATN;EAAA;IAAA;IAAA;IAAA;EAAA,QAFF;AAoBH,CArDD;;GAAMV,K;UAKJJ,W;;;KALII,K;AAuDN,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}